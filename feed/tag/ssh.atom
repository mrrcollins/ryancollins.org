<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>RyanCollins.org - ssh</title><link href="https://ryancollins.org/" rel="alternate"></link><link href="https://ryancollins.org/feed/tag/ssh.atom" rel="self"></link><id>https://ryancollins.org/</id><updated>2016-02-02T09:55:00-05:00</updated><entry><title>Uploading my current IP address so I can find my Pi</title><link href="https://ryancollins.org/2016/02/02/uploading-my-current-ip-address-so-i-can-find-my-pi/" rel="alternate"></link><published>2016-02-02T09:55:00-05:00</published><updated>2016-02-02T09:55:00-05:00</updated><author><name>mr.rcollins</name></author><id>tag:ryancollins.org,2016-02-02:/2016/02/02/uploading-my-current-ip-address-so-i-can-find-my-pi/</id><summary type="html">&lt;p&gt;For some reason my autossh job is failing to set up the reverse tunnel so I can find and connect to my Pi when the Pi is roaming. Until I figure out why that is happening, I wrote this bash script which will upload the wifi interface's current IP address …&lt;/p&gt;</summary><content type="html">&lt;p&gt;For some reason my autossh job is failing to set up the reverse tunnel so I can find and connect to my Pi when the Pi is roaming. Until I figure out why that is happening, I wrote this bash script which will upload the wifi interface's current IP address to a remote server.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;ifconfig wlan0 &lt;span class="p"&gt;|&lt;/span&gt; sed -En &lt;span class="s1"&gt;&amp;#39;s/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    ssh USER@REMOTE.SERVER &lt;span class="s2"&gt;&amp;quot;cat &amp;gt; ~/myip.txt&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;I already have ssh passwordless logins in set up because of autossh. If you don't have that set up, then you'll need to do that first or this won't work. I then add a cron job to run this script every minute. &lt;/p&gt;</content><category term="ip"></category><category term="ssh"></category><category term="ifconfig"></category></entry><entry><title>Jumping to multiple hosts with ssh behind a gateway</title><link href="https://ryancollins.org/2016/01/19/jumping-to-multiple-hosts-with-ssh-behind-a-gateway/" rel="alternate"></link><published>2016-01-19T09:55:00-05:00</published><updated>2016-01-19T09:55:00-05:00</updated><author><name>mr.rcollins</name></author><id>tag:ryancollins.org,2016-01-19:/2016/01/19/jumping-to-multiple-hosts-with-ssh-behind-a-gateway/</id><summary type="html">&lt;p&gt;At home I have several hosts that I need to ssh into at various times. Unfortunately, since IPv6 is widely deployed, I am stuck sshing into one host that is publically accessible, and from there sshing into other hosts. Cumbersome to say the least, but it does look cool when …&lt;/p&gt;</summary><content type="html">&lt;p&gt;At home I have several hosts that I need to ssh into at various times. Unfortunately, since IPv6 is widely deployed, I am stuck sshing into one host that is publically accessible, and from there sshing into other hosts. Cumbersome to say the least, but it does look cool when I'm showing it off.&lt;/p&gt;
&lt;p&gt;Anyway, you can automate the connection with netcat on the gateway host. I like to put my ssh commands into my ~/.ssh/config file so then I don't have to remember anything. To jump to an internal host from the gateway I add the following to my ~/.ssh/config file on the client (most notably, &lt;a href="http://eduk8.me/2016/01/teaching-an-old-macbook-pro-new-tricks/"&gt;my 2010 MacBook Pro&lt;/a&gt;).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Host macmini
    hostname LOCALIP
    user gadmin
    ProxyCommand ssh USER@GATEWAY nc %h %p
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Replace LOCALIP with the address of the host to which you want to jump, and replace USER@GATEWAY with the gateway's username and address. You can use other hosts defined in your ~/.ssh/config file, so if you have a host for GATEWAY, you can use it.&lt;/p&gt;</content><category term="ssh"></category><category term="proxy"></category></entry></feed>