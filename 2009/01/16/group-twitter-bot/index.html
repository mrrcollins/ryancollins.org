<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>Group Twitter bot</title>
        <link rel="openid.server" href="https://api.screenname.aol.com/auth/openidServer" >
        <link rel="openid.delegate" href="http://openid.aol.com/gozarrlc" >
        <link rel="shortcut icon" type="image/x-icon" href="http://ryancollins.org/favicon.ico">
        <link rel="stylesheet" href="http://ryancollins.org/theme/css/main.css">
        <link href="http://ryancollins.org/feed/index.atom" type="application/atom+xml" rel="alternate" title="RyanCollins.org Atom Feed" />
        <link href="http://ryancollins.org/feed/index.rss" type="application/rss+xml" rel="alternate" title="RyanCollins.org RSS Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
        <!-- <h1><a href="http://ryancollins.org/">RyanCollins.org </a></h1> -->
        <div align="center"><a href="http://ryancollins.org/"><img src="http://ryancollins.org/theme/images/einsteinbanner.jpg"></a></div>
                <nav><ul>
                    <li><a href="http://ryancollins.org/about-me/">About Me</a></li>
                    <li ><a href="http://ryancollins.org/category/asides/">Asides</a></li>
                    <li class="active"><a href="http://ryancollins.org/category/blog/">blog</a></li>
                    <li ><a href="http://ryancollins.org/category/hardware/">Hardware</a></li>
                    <li ><a href="http://ryancollins.org/category/misc/">misc</a></li>
                    <li ><a href="http://ryancollins.org/category/op-ed/">Op Ed</a></li>
                    <li ><a href="http://ryancollins.org/category/presentations/">Presentations</a></li>
                    <li ><a href="http://ryancollins.org/category/software/">Software</a></li>
                    <li ><a href="http://ryancollins.org/category/thursday-3/">Thursday 3</a></li>
                </ul></nav>
                </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://ryancollins.org/2009/01/16/group-twitter-bot/" rel="bookmark"
           title="Permalink to Group Twitter bot">Group Twitter bot</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2009-01-16T14:48:00">
                Fri 16 January 2009
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="http://ryancollins.org/author/mrrcollins/">mr.rcollins</a>
        </address>
<p>In <a href="http://ryancollins.org/category/blog/">blog</a>. </p>
<p>tags: <a href="http://ryancollins.org/tag/email/">email</a><a href="http://ryancollins.org/tag/etech/">etech</a><a href="http://ryancollins.org/tag/php/">php</a><a href="http://ryancollins.org/tag/twitter/">twitter</a></p>
</footer><!-- /.post-info -->      <p>Chris Hamady had the idea that at the <a href="http://www.etech.ohio.gov/go/conference">eTech Ohio State Technology
Conference</a> we should be able to use <a href="http://twitter.com/">Twitter</a><a href="http://ryancollins.org/wp/wp-content/uploads/2009/01/twitterbotphp.zip"></a> to communicate
great things that individuals see throughout the conference. It needed
to be set up easy enough for people that have not been using Twitter to
use. After discussions with John Schinker, they contacted me and I came
up with the idea of a twitter bot that people would follow, and direct
messages to that bot would be sent to all the bot's followers. This way
most people can just follow the bot and get updates, and those that
wanted to send out an update would only need to send a direct message to
the bot with the update.</p>
<p>The way the bot works is off of the emails that Twitter sends out when a
Twitter account receives a notification of a new follower or a direct
message. The requirements for the bot are:<br />
• A twitter account (in this case it is etechohio09)<br />
• An email account with POP3 access (in this case a gmail account is
used. This email account address needs to be secret because there isn't
any checking on the validity of where an email came from so this would
allow people without even a Twitter account to spam the bot)<br />
• a unix based host with php at the command line (I use Ubuntu, but it
should work in OS X)<br />
• fetchmail also needs to be available</p>
<p>The process to set up the bot is as follows:<br />
1. An email account is set up at gmail. This account must of pop3
turned on, which you can do from the gmail settings.<br />
2. Create a Twitter account, using the above email account. In Twitter
be sure to go to Settings -> Notices and have the notices for followers
and direct messages checked.<br />
3. Set up an account on the unix host for the bot.<br />
4. Login to the account on the unix host.<br />
5. Create the .fetchmailrc:</p>
<div class="highlight"><pre>     nano -w .fetchmailrc
</pre></div>


<p>​6. Enter the following lines to that file:</p>
<div class="highlight"><pre>     set logfile /home/UNIXACCOUNT/fetchmail.log

     poll &quot;pop.gmail.com&quot; proto POP3 timeout 100 no uidl
     no envelope user &quot;BOTACCOUNT@gmail.com&quot;
     password &quot;BOTPASSWORD&quot; fetchlimit 100 ssl
</pre></div>


<p>​7. Create the logfile:</p>
<div class="highlight"><pre>     touch fetchmail.log
</pre></div>


<p>​8. Create the .forward file:</p>
<div class="highlight"><pre>     nano -w .forward
</pre></div>


<p>​9. Enter the following line:</p>
<div class="highlight"><pre>     |&quot;/home/UNIXACCOUNT/twitterbot.php&quot;
</pre></div>


<p>​10. Download [twitterbot.php][], and make it executable:</p>
<div class="highlight"><pre>     chmod +x twitterbot.php
</pre></div>


<p>​11. Edit twitterbot.php and enter your Twitter username and password:</p>
<div class="highlight"><pre>     nano twitterbot.php
</pre></div>


<p>​12. Start up fetchmail in daemon mode and your bot should be
functional.</p>
<div class="highlight"><pre>     fetchmail -d 60
</pre></div>


<p>What will happen is that fetchmail will check the email account every 60
seconds. Any email will be downloaded and each message passed to
twitterbot.php. twitterbot.php will examing the headers for the twitter
command and then act accordingly. If it is a new follower, twitterbot
will start following that person. If it is a direct message, twitterbot
will then post that message to the bot's timeline for all its followers
to read.</p>
<p>The email class used for this twitterbot came from <a href="http://phpclasses.elib.com/browse/file/8922.html">phpclasses.org</a>,
modified to pull out a few of the X-headers that Twitter adds so the bot
can figure out the type of message and who is sending it.</p>

      <div class="signature"><img style="border:0px" src="http://dl.ryancollins.org/SignatureRyan.png"/></div>
    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "2009/01/16/group-twitter-bot/";
        var disqus_url = "http://ryancollins.org/2009/01/16/group-twitter-bot/";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://ryancollinsorg.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://ryancollins.org/feed/index.atom" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            <li><a href="http://ryancollins.org/feed/index.rss" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="https://twitter.com/mr_rcollins">@mr_rcollins</a></li>
                            <li><a href="https://github.com/mrrcollins">mrrcollins</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
        <script>
              (function() {
                  var cx = '007485414167778228402:2kn0k5kjb5m';
                      var gcse = document.createElement('script');
                          gcse.type = 'text/javascript';
                              gcse.async = true;
                                  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                                          '//www.google.com/cse/cse.js?cx=' + cx;
                                              var s = document.getElementsByTagName('script')[0];
                                                  s.parentNode.insertBefore(gcse, s);
                                                    })();
                                                </script>
                                                <gcse:search></gcse:search>
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'ryancollinsorg';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>